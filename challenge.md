## 光照
===============================================================================================
《Illumination Change Robustness in Direct Visual SLAM》2017，ICRA
目前的直接法SLAM最小化亮度误差（LK光流），都依赖于亮度一致假设，因此无法应对亮度显著变化的场景，尤其是闭环，没法找到闭环。
本文回顾了现有的直接法SLAM，对比准确性、鲁棒性。结论是认为census-based方法最佳。

introduction
现有的方法，大多做了亮度一致假设，那么当亮度真实发生变化时，算法没法把两个亮度不一致的点匹配上，则认为是outlier加以剔除。当亮度显著变化时，几乎没有能匹配上的点，就会失败了。
本文从视觉里程计、闭环两个方面评估算法应对光线变化的准确性、鲁棒性，前者光线变化较小，后者较大。
本文的贡献：
    1.评估现有算法应对光线变换的效果
    2.光线变化的数据集

related work
III部分，[2]-[5],[7]-[15]假设亮度一致。
IV-A部分，[18]-[20]全局光照变化时，减去中值归一化；局部亮度变化，用huber函数，降低权重。
IV-B部分，[21],[22]联合优化亮度仿射变换，应该是把亮度作为一个参数一起优化了。[23]DSO加入了亮度标定。[24]处理更加细粒度的光照变化，仿射变换。
IV-C部分，ZNCC（Zero-Mean Normalized Cross Correlation）零均值归一化相关系数，具有仿射亮度不变性，用于代价函数。[30],[31]
IV-D部分，互信息（mutual information）在图像差异较大时，进行相似性度量的一个很好的指标。但是目前还没有用于VO中的，不过有很多在BA优化中用到了。[25],[28]
IV-E部分，梯度magnitude。
IV-F部分，用梯度代替亮度。[29]
IV-G部分，局部零偏归一化。
IV-H部分，描述子，应对无纹理、亮度、模糊。[32]
IV-I部分，census变换用于跟踪。[33],[34]

[35]对亮度变化建模，假设是平缓的亮度变化情况。而实际场景中由于深度的不连续性，亮度一般不会平缓连续变化，所以它不符合实际。
[36]曝光时间加入优化参数，考虑的是相机引起的亮度变化。而实际更多的是环境导致的亮度变换。
[37]inverse compositional method，亮度变化考虑进去
[38]cross-cumulative residual entropy，图像块匹配的策略。
[39]sum of conditional variance，图像块匹配的策略。

[42]光流算法中的匹配误差函数，matching cost，对比，结论是census transform优于其他策略
[43]双目深度估计中的匹配误差函数，matching metric，对比，结论还是census transform最优。

结论：gradient magnitude最优。

===============================================================================================
《Robust Visual Localization in Changing Lighting Conditions》2017，ICRA
基于视觉特征的定位，当定位时的光照与建图时的光照不一致，算法就会变差。本文发现暗光时建图，亮光定位可以很好工作；但是反过来不行。本文自动识别当前的亮度级别，选择合适的地图和相机曝光时间。

introduction
通过实验评估不同光照条件下，定位的准确性；
建立不同光照下的多个地图，定位的时候根据亮度选择对于的地图，同时指导调节曝光时间来达到最优亮度。

related work
关键词appearance space，metric space。就是用图像去地图中找到最相似的图像。
[9]亮度不变性的特征。[10]高动态范围相机，用不同曝光时间的图像提取描述子。[6]SeqSLAM比较图像序列，而不是两张图像之间比较，对于FoV的变化非常敏感，同时时间复杂度O(nm)，n是地图尺寸，m是图像序列尺寸，比词典树的方法高很多。[19]svo手机版。

离线建图
离线采集图像，提取surf特征，然后执行SFM，构建地图，包括图优化pose+landmark。之后，把surf换成brisk，这一步的目的是让在线定位更快，surf更准确但比较慢，离线建图；brisk比较快，用于在线定位。然后构建BoW。

在线定位
brisk特征，ransac+p3p。

光照
亮度指标lux。采集了10种亮度下的图像，其中有一个太黑了，剩下9个各自建图。9个亮度的地图，然后用4种亮度环境去定位，一共就是9*4种组合。
结论：45lux建的地图，任意亮度环境下定位都能成功（80%）；60lux以上比较亮的地图，只有当环境比较亮的时候才会成功。当亮度过大时，图像细节丢失，但是亮度比较低时，细节还是有的，认为亮度过大时的描述子不够鲁棒。
但是最佳组合还是相同亮度下建图、定位。因此，如果知道了环境亮度等级，就非常好办了。

如何计算环境亮度？提取brisk描述子，然后跟数据库作比较，计算KL散度，找到最接近的。
注：这个调节算法只能用于可调节曝光时间的相机，自动曝光的相机是不行的的。

总结：不带曝光调节，成功率提升了10%~20%。带曝光调节，成功率稍稍提升一点。这个文章针对全局光照变化，未来例如点光源、阴影等需要解决。
曝光：假设环境中有1000lux的太阳，0.1lux的暗角落。想要看清楚太阳，就要少曝光，这样暗角落就会变成黑色；想要看清暗角落，太阳就是一片白色255了。
如果有图像raw文件，10bit，可以调节，让太阳暗一点，让暗角落亮一点。HDR就是可以采不同亮度曝光下的多幅图像，然后拼接起来，要求图像不能移动过大，否则拼不起来。

===============================================================================================
《Loosely-Coupled Semi-Direct Monocular SLAM》2018，ICRA
三个优化
1.亮度BA，局部地图
2.几何BA，滑窗关键帧的pose+地图特征点
3.闭环时候的BA，保证全局一致性
等于是直接法、特征点法的结合，准确率和鲁棒性上面优于SOTA。
从结果来看，准确率比直接法高一些，跟orb-slam相比，差距不是很大，长时间之后可以看到一些差异。时间上，比直接法DSO慢一点点，比orb快很多了。

introduction
例如sift、orb等特征具有一定的亮度、视角不变性，相邻帧运动过大时还可以工作，直接法则不行。闭环检测的时候，则只能用特征点了。
直接法DSO，半直接法SVO。

本文：
滑窗，局部直接法，用于pose跟踪，半稠密地图。
全局，基于特征点修正关键帧pose，闭环检测。
基于DSO+ORB，开源：https://github.com/sunghoon031/LCSD_SLAM

related work
直接法的问题，没有可以复用的地图。fixed map tracking, map based localization。

细节实现todo

===============================================================================================
《Illumination Robust Loop Closure Detection with the Constraint of Pose》2019，不知名
DIRD亮度不变特征，里程计信息，结合起来缩小检索范围，找到候选闭环帧。

introduction
[5]FAB-MAP2.0、SeqSLAM两个在闭环检测上是最优的。
长时间slam，闭环检测维护的数据库巨大，效率越来越受影响。利用里程计信息解决这个问题，CAT-SLAM、SMART。里程计推测目前的大致位置，数据库分区域？

related work
局部特征描述：sift、surf、brief。全局特征描述：hog。
检索方式，bow词袋树。拓扑图，通过几何位置索引。
[23]CAT-SLAM，[24]SMART。

总结，没啥创新性，用里程计信息估计大致的候选帧，然后用DIRD来匹配检索。

===============================================================================================
《LMVI-SLAM: Robust Low-Light Monocular Visual-Inertial Simultaneous Localization and Mapping》2019，ROBIO
图像增强：伽马校正，对比自适应直方图均衡化，改善亮度、对比度。亮度较低时，用光流跟踪。紧耦合的优化模型，重投影误差、imu积分误差。

introduction
[9]edge-slam。[10]PL-VIO，点、线特征。[11]线特征vo。
优化相比滤波方法的一个优点是，非线性优化，而滤波是近似为线性优化，所以结果是不够精确的。
本文贡献：
1.图像增强